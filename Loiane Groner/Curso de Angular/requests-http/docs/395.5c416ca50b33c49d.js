"use strict";(self.webpackChunkrequests_http=self.webpackChunkrequests_http||[]).push([[395],{395:(tt,A,s)=>{s.r(A),s.d(A,{CursosModule:()=>v});var a=s(433),b=s(9646),t=s(1571);var T=s(4986),I=s(7272),p=s(5698),q=s(4482),x=s(5403),E=s(5032),L=s(9718),F=s(5577),N=s(8421);function y(o,e){return e?n=>(0,I.z)(e.pipe((0,p.q)(1),function S(){return(0,q.e)((o,e)=>{o.subscribe((0,x.x)(e,E.Z))})}()),n.pipe(y(o))):(0,F.z)((n,r)=>(0,N.Xf)(o(n,r)).pipe((0,p.q)(1),(0,L.h)(n)))}var Y=s(9751),k=s(3532);var D=s(529);class c{constructor(e){this.http=e,this.API="http://localhost:3000/cursos"}list(){return this.http.get(this.API).pipe(function R(o,e=T.z){const n=function z(o=0,e,n=T.P){let r=-1;return null!=e&&((0,k.K)(e)?n=e:r=e),new Y.y(i=>{let u=function J(o){return o instanceof Date&&!isNaN(o)}(o)?+o-n.now():o;u<0&&(u=0);let Z=0;return n.schedule(function(){i.closed||(i.next(Z++),0<=r?this.schedule(void 0,r):i.complete())},u)})}(o,e);return y(()=>n)}(2e3))}loadById(e){return this.http.get(`${this.API}/${e}`).pipe((0,p.q)(1))}create(e){return this.http.post(this.API,e).pipe((0,p.q)(1))}update(e){return this.http.put(`${this.API}/${e.id}`,e).pipe((0,p.q)(1))}save(e){return e.id?this.update(e):this.create(e)}remove(e){return this.http.delete(`${this.API}/${e}`).pipe((0,p.q)(1))}}c.\u0275fac=function(e){return new(e||c)(t.LFG(D.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});class l{constructor(e){this.service=e}resolve(e,n){return e.params&&e.params.id?this.service.loadById(e.params.id):(0,b.of)({id:0,nome:""})}}l.\u0275fac=function(e){return new(e||l)(t.LFG(c))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"});var U=s(6937);class _{constructor(e){this.bsModalRef=e}onClose(){this.bsModalRef.hide()}}_.\u0275fac=function(e){return new(e||_)(t.Y36(U.UZ))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-alert-modal"]],inputs:{message:"message",type:"type"},decls:4,vars:4,consts:[["role","alert"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["type","button","aria-label","Close","aria-hidden","true",1,"btn-close"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){return n.onClose()}),t._UZ(3,"button",2),t.qZA()()),2&e&&(t.Gre("alert alert-",n.type," no-margin"),t.xp6(1),t.hij(" ",n.message," "))},styles:[".no-margin[_ngcontent-%COMP%]{margin-bottom:0}"]});class m{constructor(e){this.modalService=e}showAlert(e,n,r){let i;i=this.modalService.show(_),i.content.type=n,i.content.message=e,r&&setTimeout(()=>i.hide(),r)}showAlertDanger(e){this.showAlert(e,"danger")}showAlertSuccess(e){this.showAlert(e,"success")}}m.\u0275fac=function(e){return new(e||m)(t.LFG(U.tT))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var d=s(6895),f=s(883);function G(o,e){1&o&&(t.TgZ(0,"div",9),t._uU(1," Por favor, informe o nome para o curso. "),t.qZA())}const O=function(o){return{"is-invalid":o}};class h{constructor(e,n,r,i,u){this.fb=e,this.service=n,this.alertService=r,this.localtion=i,this.route=u,this.submitted=!1}ngOnInit(){const e=this.route.snapshot.data.curso;this.form=this.fb.group({id:[e.id],nome:[e.nome,[a.kI.required,a.kI.minLength(2),a.kI.maxLength(20)]]})}onSubmit(){if(this.submitted=!0,this.form.valid){let e="Curso atualizado com sucesso!",n="Erro ao atualizar curso!";this.form.value.id||(e="Curso criado com sucesso!",n="Erro ao criar curso!"),this.service.save(this.form.value).subscribe(r=>{this.alertService.showAlertSuccess(e),this.localtion.back()},r=>{this.alertService.showAlertDanger("Erro ao atualizar curso, tente novamente.")})}}onCancel(){this.submitted=!1,this.form.reset(),this.localtion.back()}hasError(e){return this.form.get(e).erros}}h.\u0275fac=function(e){return new(e||h)(t.Y36(a.qu),t.Y36(c),t.Y36(m),t.Y36(d.Ye),t.Y36(f.gz))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-cursos-form"]],decls:12,vars:5,consts:[["novalidate","",1,"needs-validation",2,"padding-top","10px",3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-6"],["for","inputCurso"],["type","text","id","inputCurso","placeholder","Nome do curso","formControlName","nome",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[2,"padding-top","10px"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"invalid-feedback"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"Nome do curso"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,G,2,0,"div",5),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return n.onSubmit()}),t._uU(9,"Salvar"),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return n.onCancel()}),t._uU(11,"Cancelar"),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("ngClass",t.VKq(3,O,n.submitted&&n.hasError("nome"))),t.xp6(1),t.Q6J("ngIf",n.hasError("nome")&&n.hasError("nome").required))},dependencies:[d.mk,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]});var $=s(7579),w=s(262);const P=["deleteModal"];function Q(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr"),t._uU(1,"\n          "),t.TgZ(2,"td"),t._uU(3),t.qZA(),t._uU(4,"\n          "),t.TgZ(5,"td"),t._uU(6),t.qZA(),t._uU(7,"\n          "),t.TgZ(8,"td"),t._uU(9,"\n            "),t.TgZ(10,"span",3),t._uU(11,"\n              "),t.TgZ(12,"button",12),t.NdJ("click",function(){const u=t.CHM(n).$implicit,Z=t.oxw(2);return t.KtG(Z.onEdit(u.id))}),t._uU(13,"\n                Atualizar\n              "),t.qZA(),t._uU(14,"\n\n              "),t.TgZ(15,"button",13),t.NdJ("click",function(){const u=t.CHM(n).$implicit,Z=t.oxw(2);return t.KtG(Z.onDelete(u))}),t._uU(16,"\n                Remover\n              "),t.qZA(),t._uU(17,"\n            "),t.qZA(),t._uU(18,"\n          "),t.qZA(),t._uU(19,"\n        "),t.qZA()}if(2&o){const n=e.$implicit;t.xp6(3),t.Oqu(n.id),t.xp6(3),t.Oqu(n.nome)}}function B(o,e){if(1&o&&(t.TgZ(0,"table",10),t._uU(1,"\n      "),t.TgZ(2,"thead"),t._uU(3,"\n        "),t.TgZ(4,"tr"),t._uU(5,"\n          "),t.TgZ(6,"th"),t._uU(7,"#"),t.qZA(),t._uU(8,"\n          "),t.TgZ(9,"th"),t._uU(10,"Curso"),t.qZA(),t._uU(11,"\n          "),t._UZ(12,"th"),t._uU(13,"\n        "),t.qZA(),t._uU(14,"\n      "),t.qZA(),t._uU(15,"\n      "),t.TgZ(16,"tbody"),t._uU(17,"\n        "),t.YNc(18,Q,20,2,"tr",11),t._uU(19,"\n      "),t.qZA(),t._uU(20,"\n    "),t.qZA()),2&o){const n=e.ngIf;t.xp6(18),t.Q6J("ngForOf",n)}}function K(o,e){1&o&&(t.TgZ(0,"div"),t._uU(1,"\n        "),t.TgZ(2,"span"),t._uU(3,"Erro ao carregar cursos. Tente novament mais tarde..."),t.qZA(),t._uU(4,"\n      "),t.qZA())}function j(o,e){1&o&&(t._uU(0,"\n        "),t.TgZ(1,"span"),t._uU(2,"Carregando Cursos..."),t.qZA(),t._uU(3,"\n      "))}function H(o,e){if(1&o&&(t._uU(0,"\n      "),t.YNc(1,K,5,0,"div",14),t.ALo(2,"async"),t._uU(3,"\n      "),t.YNc(4,j,4,0,"ng-template",null,15,t.W1O),t._uU(6,"\n\n    ")),2&o){const n=t.MAs(5),r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,r.error$))("ngIfElse",n)}}function X(o,e){if(1&o){const n=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",16),t._uU(2,"\n    "),t.TgZ(3,"p"),t._uU(4,"Tem certeza que voc\xea deseja excluir o curso?"),t.qZA(),t._uU(5,"\n    "),t.TgZ(6,"button",17),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onConfirmDelete())}),t._uU(7,"Sim"),t.qZA(),t._uU(8,"\n    "),t.TgZ(9,"button",5),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onDeclineDelete())}),t._uU(10,"N\xe3o"),t.qZA(),t._uU(11,"\n  "),t.qZA(),t._uU(12,"\n")}}const W=function(){return["novo"]};class C{constructor(e,n,r,i,u){this.service=e,this.modalService=n,this.alertService=r,this.router=i,this.route=u,this.error$=new $.x}ngOnInit(){this.onRefresh()}onRefresh(){this.cursos$=this.service.list().pipe((0,w.K)(e=>(console.log(e),this.handleError(),(0,b.of)())))}handleError(){this.alertService.showAlertDanger("Erro ao carregar cursos. Tente novamente mais tarde...")}onEdit(e){this.router.navigate(["editar",e],{relativeTo:this.route})}onDelete(e){this.cursoSelecionado=e,this.deleteModalRef=this.modalService.show(this.deleteModal,{class:"modal-sm"})}onConfirmDelete(){this.service.remove(this.cursoSelecionado?.id).subscribe(e=>this.alertService.showAlertSuccess("Curso removido com sucesso!"),e=>this.alertService.showAlertDanger("Erro ao remover curso!")),this.deleteModalRef?.hide(),this.onRefresh()}onDeclineDelete(){this.deleteModalRef?.hide()}}C.\u0275fac=function(e){return new(e||C)(t.Y36(c),t.Y36(U.tT),t.Y36(m),t.Y36(f.F0),t.Y36(f.gz))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-cursos-lista"]],viewQuery:function(e,n){if(1&e&&t.Gf(P,5),2&e){let r;t.iGM(r=t.CRH())&&(n.deleteModal=r.first)}},decls:33,vars:6,consts:[[1,"card","mt-3"],[1,"card-header"],[1,"float-left"],[1,"float-right"],["type","button",1,"btn","btn-primary",3,"routerLink"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"card-body"],["class","table table-hover",4,"ngIf","ngIfElse"],["loadingError",""],["deleteModal",""],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-warning","mb-1","btn-sm",3,"click"],[1,"btn","btn-outline-danger","mb-1","btn-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],[1,"modal-body","text-center"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t.TgZ(2,"div",1),t._uU(3,"\n    "),t.TgZ(4,"div",2),t._uU(5,"\n      "),t.TgZ(6,"h4"),t._uU(7,"Cursos"),t.qZA(),t._uU(8,"\n    "),t.qZA(),t._uU(9,"\n    "),t.TgZ(10,"div",3),t._uU(11,"\n      "),t.TgZ(12,"button",4),t._uU(13,"Novo Curso"),t.qZA(),t._uU(14,"\n      "),t.TgZ(15,"button",5),t.NdJ("click",function(){return n.onRefresh()}),t._uU(16,"Atualizar"),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n  "),t.qZA(),t._uU(19,"\n  "),t.TgZ(20,"div",6),t._uU(21,"\n    "),t.YNc(22,B,21,1,"table",7),t.ALo(23,"async"),t._uU(24,"\n\n    "),t.YNc(25,H,7,4,"ng-template",null,8,t.W1O),t._uU(27,"\n  "),t.qZA(),t._uU(28,"\n"),t.qZA(),t._uU(29,"\n\n"),t.YNc(30,X,13,0,"ng-template",null,9,t.W1O),t._uU(32,"\n")),2&e){const r=t.MAs(26);t.xp6(12),t.Q6J("routerLink",t.DdM(5,W)),t.xp6(10),t.Q6J("ngIf",t.lcZ(23,3,n.cursos$))("ngIfElse",r)}},dependencies:[d.sg,d.O5,f.rH,d.Ov],styles:[".float-right[_ngcontent-%COMP%]{float:right}"]});const V=[{path:"",component:C},{path:"novo",component:h,resolve:{curso:l}},{path:"editar/:id",component:h,resolve:{curso:l}}];class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[f.Bz.forChild(V),f.Bz]});class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[d.ez,g,a.UX]})}}]);